# colors, display with
# for i in {0..255}; do
#     printf "\x1b[38;5;${i}mcolour${i}\x1b[0m\n"
# done
# grays from colour232 to colour255

# prefix key
unbind C-b
set-option -g prefix C-Space
bind-key C-Space send-prefix

# reload config
bind r source-file ~/.tmux.conf \; display-message "Config reloaded..."

# pane style
set -g pane-border-status top
set -g pane-border-style "fg=colour08,bg=colour233"
set -g pane-active-border-style "fg=colour166,bg=colour233"
set -g display-panes-time 3000 # slightly longer pane indicators display time
#set -g pane-border-format " #P: #{pane_current_command} "
#set -g pane-border-format " #P: #(pstree -aATs $(ps --no-headers -t #{pane_tty} -o pid | head -n 1)\
| sed -E 's/^ *?\`-/ ▶ /'\
| tr -d '\n'\
| sed -E 's/.*?tmux: server ▶ //') "

set -g pane-border-format " #(~/bin/format_tty_processes #{pane_tty}) "
# status bar style
set-option -g status-style "fg=colour15,bg=colour233"

# use vim-like keys for splits and windows
unbind '"'
unbind %
bind-key v split-window -h
bind-key s split-window -v
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

#Automatic layouting: When creating new splits or destroying older ones the currently selected layout isn't applied. To fix that, add following binds which will apply the currently selected layout to new or remaining panes: 
bind-key -n M-c kill-pane \; select-layout
bind-key -n M-n split-window \; select-layout

# turn on mouse support
set -g mouse on

# remedy delay when pressing nvim escape
set -sg escape-time 10

# vim-style text selection in copy mode
bind-key -Tcopy-mode-vi 'v' send -X begin-selection
bind-key -Tcopy-mode-vi 'y' send -X copy-pipe-and-cancel pbcopy

set-option -ga terminal-overrides ",xterm-256color:Tc"

